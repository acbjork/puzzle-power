
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üß† I‚Äôm Puzzled ‚ÄºÔ∏è</title>
  <style>
    body { font-family: system-ui, sans-serif; font-size: 16px; margin: 1em; }
    h1 { text-align: center; }
    .subtitle { text-align: center; color: #555; margin-top: -0.5em; margin-bottom: 1em; }
    .version { position: fixed; bottom: 0.5em; right: 1em; font-size: 0.85em; color: #aaa; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; }
    th, td { border: 1px solid #ccc; padding: 0.5em; text-align: center; vertical-align: top; }
    th.puzzle { text-align: left; width: 30%; }
    th.player { width: 35%; }
    textarea { width: 95%; height: 4em; font-family: monospace; }
    .submitted { white-space: pre-wrap; background: #f0f0f0; padding: 0.5em; border-radius: 4px; margin-bottom: 0.5em; }
    .winner { background: #d6f5d6; }
    .tie { background: #fff5c2; }
  </style>
</head>
<body>
  <h1>üß† I‚Äôm Puzzled ‚ÄºÔ∏è</h1>
  <div class="subtitle">If you ain‚Äôt first, you‚Äôre last</div>
  <label for="playerPicker">Signed in as:
    <select id="playerPicker">
      <option value="">(choose)</option>
      <option value="Adam">Adam üåµ</option>
      <option value="Jonathan">Jonathan üí©</option>
    </select>
  </label>
  <table id="resultsTable" style="display:none;">
    <thead>
      <tr><th class="puzzle">Puzzle</th><th class="player">Adam üåµ</th><th class="player">Jonathan üí©</th></tr>
    </thead>
    <tbody id="resultsBody"></tbody>
  </table>
  <div class="version">vE.1.3 - Increment 2</div>

  <script>
    const puzzles = ["Connections", "Wordle"];
    const data = {
      "Connections": {
        "Adam": "üü®üü®üü®üü®\nüü¶üü¶üü¶üü¶\nüü©üü©üü©üü©\nüü™üü™üü™üü™",
        "Jonathan": "üü®üü®üü®üü®\nüü¶üü¶üü¶üü¶\nüü©üü©üü©üü©\nüü™üü™üü™üü™"
      },
      "Wordle": {
        "Adam": "Wordle 1434 3/6",
        "Jonathan": "Wordle 1434 4/6"
      }
    };

    let currentPlayer = null;

    function renderTable() {
      const body = document.getElementById("resultsBody");
      body.innerHTML = "";

      puzzles.forEach(puzzle => {
        const row = document.createElement("tr");
        const tdLabel = document.createElement("td");
        tdLabel.textContent = puzzle;
        row.appendChild(tdLabel);

        const adamCell = document.createElement("td");
        const jonCell = document.createElement("td");

        const adamVal = data[puzzle]["Adam"];
        const jonVal = data[puzzle]["Jonathan"];

        const adamDiv = document.createElement("div");
        const jonDiv = document.createElement("div");

        adamDiv.textContent = adamVal;
        jonDiv.textContent = jonVal;
        adamDiv.className = "submitted";
        jonDiv.className = "submitted";

        // TIE logic
        if (adamVal && jonVal && adamVal === jonVal) {
          adamDiv.classList.add("tie");
          jonDiv.classList.add("tie");
        } else if (puzzle === "Wordle" && adamVal && jonVal) {
          const num1 = parseInt(adamVal.split(" ")[2]) || 7;
          const num2 = parseInt(jonVal.split(" ")[2]) || 7;
          if (num1 < num2) adamDiv.classList.add("winner");
          else if (num2 < num1) jonDiv.classList.add("winner");
          else { adamDiv.classList.add("tie"); jonDiv.classList.add("tie"); }
        }

        adamCell.appendChild(adamDiv);
        jonCell.appendChild(jonDiv);

        if (currentPlayer === "Adam") {
          const editBtn = document.createElement("button");
          editBtn.textContent = "Edit";
          editBtn.onclick = () => inlineEdit(puzzle, "Adam", adamCell, adamVal);
          adamCell.appendChild(document.createElement("br"));
          adamCell.appendChild(editBtn);
        }

        if (currentPlayer === "Jonathan") {
          const editBtn = document.createElement("button");
          editBtn.textContent = "Edit";
          editBtn.onclick = () => inlineEdit(puzzle, "Jonathan", jonCell, jonVal);
          jonCell.appendChild(document.createElement("br"));
          jonCell.appendChild(editBtn);
        }

        row.appendChild(adamCell);
        row.appendChild(jonCell);
        body.appendChild(row);
      });

      document.getElementById("resultsTable").style.display = "table";
    }

    function inlineEdit(puzzle, player, cell, oldValue) {
      cell.innerHTML = "";
      const ta = document.createElement("textarea");
      ta.value = oldValue;
      cell.appendChild(ta);
      const btn = document.createElement("button");
      btn.textContent = "Submit";
      btn.onclick = () => {
        data[puzzle][player] = ta.value.trim();
        renderTable();
      };
      cell.appendChild(document.createElement("br"));
      cell.appendChild(btn);
    }

    document.getElementById("playerPicker").addEventListener("change", e => {
      currentPlayer = e.target.value;
      renderTable();
    });
  </script>
</body>
</html>
